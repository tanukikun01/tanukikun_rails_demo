<div id="<%= dom_id post %>">
  <div>
    <strong>Title:</strong>
    <%= post.title %>
  </div>

  <div>
    <strong>Body:</strong>
    <%= post.body %>
  </div>

  <div>
    <strong>User:</strong>
    <%= post.user&.name || post.user_id %>
  </div>

  <p><strong>Likes:</strong> <%= post.likes.count %></p>

  <%= form_with url: likes_path, method: :post, local: true do %>
    <%= hidden_field_tag "like[user_id]", params[:user_id] %>
    <%= hidden_field_tag "like[likeable_type]", "Post" %>
    <%= hidden_field_tag "like[likeable_id]", post.id %>
    <div>
      <%= label_tag :user_id, "User" %>
      <%= select_tag :user_id,
                     options_from_collection_for_select(User.all, :id, :name, params[:user_id]),
                     include_blank: true,
                     onchange: "this.form.querySelector('input[name=\\\"like[user_id]\\\"]').value=this.value" %>
    </div>
    <%= submit_tag "Like" %>
  <% end %>
</div>
